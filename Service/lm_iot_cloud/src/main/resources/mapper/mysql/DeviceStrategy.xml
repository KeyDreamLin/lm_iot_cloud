<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lm.admin.mapper.mysql.device.DeviceStrategyMapper">
    <select id="findAllDeviceStrategyDto" resultType="com.lm.admin.entity.dto.devicestrategy.DeviceStrategyDto">
        SELECT `id`,`exp_str`,`ret_data`,`status`FROM `lm_device_strategy`
    </select>
    <!-- 查询所有策略数量 -->
    <select id="findDeviceStrategyCount" resultType="java.lang.Integer">
        SELECT count(1) FROM `lm_device_strategy`
    </select>
    <!-- 策略 分页 模糊 查询 -->
    <select id="findDeviceStrategyPage" resultType="com.lm.admin.entity.bo.devicestrategy.DeviceStrategyListPageBo">
        select
               `id`,`name`,`describe`,`status`,`create_time`
        from
             `lm_device_strategy`
        <where>
            <if test="keyword != null">
                `exp_str` = #{keyword}
                OR
                `ret_data` LIKE "%"#{keyword}"%"
            </if>
        </where>
        limit #{pageIndex},#{pageSize}
    </select>


</mapper>
